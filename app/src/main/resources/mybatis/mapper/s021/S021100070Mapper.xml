<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="S021100070">
    <select id="selectDeptLevel" parameterType="java.lang.Integer" resultType="com.swontech.s02.domain.dto.s021.S021100070Dto$DeptLevel">
        SELECT	E_VI.EVENT_ID,
                EVENT_NM,
                HIGH_EVENT_ID,
                ID_PATH,
                LEV AS EVENT_LEVEL,
                EVENT_TP
        FROM	TB_S020.EVENT_HIERARCHY_VIEW  E_VI
        WHERE	ORG_ID = #{orgId}
    </select>

    <select id="selectDeptDetailInfo" parameterType="java.lang.Integer" resultType="com.swontech.s02.domain.dto.s021.S021100070Dto$DeptDetailInfo">
        SELECT	E010.EVENT_ID,						-- EVENT_ID
                E010.EVENT_NM,						-- 부서(사역)명
                E010.EVENT_CODE,					-- 코드
                E010.EVENT_HOST_ID,					-- 책임자 ID
                M010.MEMBER_NAME,					-- 책임자 명
                E010.EVENT_BUDGET_AMOUNT,			-- 예산금액
                E010.EVENT_START_DATE,				-- 사용일자의 시작일자
                E010.EVENT_END_DATE,				-- 사용일자의 종료일자
                E010.EVENT_LOC,						-- 행사장소
                E010.DEFAULT_EVENT_FLAG,			-- 기본 사역(행사)여부 (Y - 기본사역(행사))
                E010.EVENT_STATUS,					-- 공개여부 (A- 공개, B- 비공개)
                E010.PAY_FLAG,						-- 결제여부(Y - 결제, N - 비결제)
                E010.EVENT_COMMENT					-- 비고
        FROM	TB_S020.TB_S020_EVENT010  E010
                INNER JOIN  TB_S020.TB_S020_MEMBER010  M010
                ON	E010.EVENT_HOST_ID = M010.MEMBER_ID
                AND	E010.ORG_ID		= M010.ORG_ID
        WHERE	E010.EVENT_ID = #{eventId}
    </select>
    <select id="selectDeptDetailPayInfo" parameterType="java.lang.Integer" resultType="com.swontech.s02.domain.dto.s021.S021100070Dto$DeptDetailPayInfo">
        SELECT		EVENT020.EVENT_ID,						-- event_id
                    EVENT020.EVENT_PAY_USER_ID,				-- 결제자 ID
                    EVENT020.EVENT_PAY_LEVEL,				-- 결제 순위
                    EVENT020.EVENT_PAY_ROLE_CD,				-- 비고
                    MEMBER010.MEMBER_NAME					-- 결제자 명
        FROM 		tb_s020.tb_s020_event020  	EVENT020,
                    tb_s020.tb_s020_member010  	MEMBER010
        WHERE 		EVENT020.EVENT_PAY_USER_ID = MEMBER010.MEMBER_ID
        AND			EVENT020.EVENT_ID = #{eventId}
        ORDER BY 	EVENT_PAY_LEVEL
    </select>
</mapper>